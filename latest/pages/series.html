<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Series · OnlineStats.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/highlightjs/default.css" rel="stylesheet" type="text/css"/><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>OnlineStats.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Basics</a></li><li><a class="toctext" href="weights.html">Weighting</a></li><li class="current"><a class="toctext" href="series.html">Series</a><ul class="internal"><li><a class="toctext" href="#Creating-1">Creating</a></li><li><a class="toctext" href="#Updating-1">Updating</a></li><li><a class="toctext" href="#Merging-1">Merging</a></li></ul></li><li><a class="toctext" href="types.html">What Can OnlineStats Do?</a></li><li><a class="toctext" href="api.html">API</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="series.html">Series</a></li></ul><a class="edit-page" href="https://github.com/joshday/OnlineStats.jl/tree/5001c7bb97fba74e71fdfb85cbe9b4dc66e13981/docs/src/pages/series.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Series</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Series-1" href="#Series-1">Series</a></h1><p>The <code>Series</code> type is the workhorse of OnlineStats.  A Series tracks</p><ol><li><p>The <code>Weight</code></p></li><li><p>An OnlineStat or tuple of OnlineStats.</p></li></ol><h2><a class="nav-anchor" id="Creating-1" href="#Creating-1">Creating</a></h2><ul><li><p>Start &quot;empty&quot;</p></li></ul><pre><code class="language-julia">Series(Mean())
Series(Mean(), Variance())

Series(ExponentialWeight(), Mean())
Series(ExponentialWeight(), Mean(), Variance())</code></pre><ul><li><p>Start with initial data</p></li></ul><pre><code class="language-julia">y = randn(100)

Series(y, Mean())
Series(y, Mean(), Variance())

Series(y, ExponentialWeight(.01), Mean())
Series(y, ExponentialWeight(.01), Mean(), Variance())

Series(ExponentialWeight(.01), y, Mean())
Series(ExponentialWeight(.01), y, Mean(), Variance())</code></pre><h2><a class="nav-anchor" id="Updating-1" href="#Updating-1">Updating</a></h2><h4><a class="nav-anchor" id="Single-observation-1" href="#Single-observation-1">Single observation</a></h4><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The input type of the OnlineStat(s) determines what a single observation is.  For a <code>Mean</code>, a single observation is a <code>Real</code>.  For OnlineStats such as <code>CovMatrix</code>, a single observation is an <code>AbstractVector</code> or <code>NTuple</code>.</p></div></div><pre><code class="language-julia">s = Series(Mean())
fit!(s, randn())

s = Series(CovMatrix(4))
fit!(s, randn(4))
fit!(s, randn(4))</code></pre><h4><a class="nav-anchor" id="Single-observation,-override-weight-1" href="#Single-observation,-override-weight-1">Single observation, override weight</a></h4><pre><code class="language-julia">s = Series(Mean())
fit!(s, randn(), .1)</code></pre><h4><a class="nav-anchor" id="Multiple-observations-1" href="#Multiple-observations-1">Multiple observations</a></h4><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The input type of the OnlineStat(s) determines what multiple observations are.  For a <code>Mean</code>, this would be a <code>AbstractVector</code>.  For a <code>CovMatrix</code>, this would be an <code>AbstractMatrix</code>.  By default, each <em>row</em> is considered an observation.  You can use column observations with <code>ObsDim.Last()</code> (see below).</p></div></div><pre><code class="language-julia">s = Series(Mean())
fit!(s, randn(100))

s = Series(CovMatrix(4))
fit!(s, randn(100, 4))                 # Obs. in rows
fit!(s, randn(4, 100), ObsDim.Last())  # Obs. in columns</code></pre><h4><a class="nav-anchor" id="Multiple-observations,-use-the-same-weight-for-all-1" href="#Multiple-observations,-use-the-same-weight-for-all-1">Multiple observations, use the same weight for all</a></h4><pre><code class="language-julia">s = Series(Mean())
fit!(s, randn(100), .01)</code></pre><h4><a class="nav-anchor" id="Multiple-observations,-provide-vector-of-weights-1" href="#Multiple-observations,-provide-vector-of-weights-1">Multiple observations, provide vector of weights</a></h4><pre><code class="language-julia">s = Series(Mean())
fit!(s, randn(100), rand(100))</code></pre><h4><a class="nav-anchor" id="Multiple-observations,-update-in-minibatches-1" href="#Multiple-observations,-update-in-minibatches-1">Multiple observations, update in minibatches</a></h4><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>OnlineStats which use stochastic approximation (those which default to use <code>LearningRate</code>) can have different behavior if they are updated in minibatches.  Not all OnlineStats have the ability to be updated in minibatches.</p></div></div><pre><code class="language-julia">s = Series(QuantileSGD())
fit!(s, randn(1000), 7)</code></pre><h2><a class="nav-anchor" id="Merging-1" href="#Merging-1">Merging</a></h2><p>Two Series can be merged if they track the same OnlineStats and those OnlineStats are mergeable.  The syntax for in-place merging is</p><pre><code class="language-julia">merge!(series1, series2, arg)</code></pre><p>Where <code>series1</code>/<code>series2</code> are Series that contain the same OnlineStats and <code>arg</code> is used to determine how <code>series2</code> should be merged into <code>series1</code>.</p><pre><code class="language-julia">y1 = randn(100)
y2 = randn(100)

s1 = Series(y1, Mean(), Variance())
s2 = Series(y2, Mean(), Variance())

# Treat s2 as a new batch of data.  Essentially:
# s1 = Series(Mean(), Variance()); fit!(s1, y1); fit!(s1, y2)
merge!(s1, s2, :append)

# Use weighted average based on nobs of each Series
merge!(s1, s2, :mean)

# Treat s2 as a single observation.
merge!(s1, s2, :singleton)

# Provide the ratio of influence s2 should have.
merge!(s1, s2, .5)</code></pre><footer><hr/><a class="previous" href="weights.html"><span class="direction">Previous</span><span class="title">Weighting</span></a><a class="next" href="types.html"><span class="direction">Next</span><span class="title">What Can OnlineStats Do?</span></a></footer></article></body></html>
